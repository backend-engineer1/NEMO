

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>数据集 &mdash; nemo 0.8.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="模型" href="models.html" />
    <link rel="prev" title="教程" href="tutorial.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> nemo
          

          
          </a>

          
            
            
              <div class="version">
                0.8.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">简介</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">如何安装</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/intro.html">从这里开始</a></li>
<li class="toctree-l1"><a class="reference internal" href="../training.html">快速训练</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="intro.html">语音识别</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="tutorial.html">教程</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">数据集</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#librispeech">LibriSpeech</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fisher-english-training-speech">Fisher English Training Speech</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hub5-english-evaluation-speech">2000 HUB5 English Evaluation Speech</a></li>
<li class="toctree-l3"><a class="reference internal" href="#aishell1">Aishell1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#aishell2">Aishell2</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="models.html">模型</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../nlp/intro.html">自然语言处理</a></li>
<li class="toctree-l1"><a class="reference internal" href="../collections/modules.html">NeMo Collections API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api-docs/modules.html">NeMo API</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">nemo</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="intro.html">语音识别</a> &raquo;</li>
        
      <li>数据集</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/asr/datasets.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1>数据集<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="librispeech">
<span id="librispeech-dataset"></span><h2>LibriSpeech<a class="headerlink" href="#librispeech" title="Permalink to this headline">¶</a></h2>
<p>Run these scripts to download LibriSpeech data and convert it into format expected by <cite>nemo_asr</cite>.
You should have at least 110GB free space.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># install sox</span>
sudo apt-get install sox
mkdir data
python get_librispeech_data.py --data_root<span class="o">=</span>data --data_set<span class="o">=</span>ALL
</pre></div>
</div>
<p>After this, your <cite>data</cite> folder should contain wav files and <cite>.json</cite> manifests for NeMo ASR datalayer:</p>
<p>Each line is a training example. <cite>audio_filepath</cite> contains path to the wav file, <cite>duration</cite> it’s duration in seconds and <cite>text</cite> it’s transcript:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;audio_filepath&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;absolute_path_to&gt;/1355-39947-0000.wav&quot;</span><span class="p">,</span> <span class="nt">&quot;duration&quot;</span><span class="p">:</span> <span class="mf">11.3</span><span class="p">,</span> <span class="nt">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;psychotherapy and the community both the physician and the patient find their place in the community the life interests of which are superior to the interests of the individual&quot;</span><span class="p">}</span>
<span class="p">{</span><span class="nt">&quot;audio_filepath&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;absolute_path_to&gt;/1355-39947-0001.wav&quot;</span><span class="p">,</span> <span class="nt">&quot;duration&quot;</span><span class="p">:</span> <span class="mf">15.905</span><span class="p">,</span> <span class="nt">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;it is an unavoidable question how far from the higher point of view of the social mind the psychotherapeutic efforts should be encouraged or suppressed are there any conditions which suggest suspicion of or direct opposition to such curative work&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="fisher-english-training-speech">
<h2>Fisher English Training Speech<a class="headerlink" href="#fisher-english-training-speech" title="Permalink to this headline">¶</a></h2>
<p>Run these scripts to convert the Fisher English Training Speech data into a format expected by the <cite>nemo_asr</cite> collection.</p>
<p>In brief, the following scripts convert the .sph files to .wav, slice those files into smaller audio samples, match the smaller slices with their corresponding transcripts, and split the resulting audio segments into train, validation, and test sets (with one manifest each).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You will need at least 106GB of space to run the .wav conversion, and an additional 105GB for the slicing and matching.
You will need to have sph2pipe installed in order to run the .wav conversion.</p>
</div>
<p><strong>Instructions</strong></p>
<p>These scripts assume that you already have the Fisher dataset from the Linguistic Data Consortium, with a directory structure that looks something like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>FisherEnglishTrainingSpeech/
├── LDC2004S13-Part1
│   ├── fe_03_p1_transcripts
│   ├── fisher_eng_tr_sp_d1
│   ├── fisher_eng_tr_sp_d2
│   ├── fisher_eng_tr_sp_d3
│   └── ...
└── LDC2005S13-Part2
    ├── fe_03_p2_transcripts
    ├── fe_03_p2_sph1
    ├── fe_03_p2_sph2
    ├── fe_03_p2_sph3
    └── ...
</pre></div>
</div>
<p>The transcripts that will be used are located in <cite>fe_03_p&lt;1,2&gt;_transcripts/data/trans</cite>, and the audio files (.sph) are located in the remaining directories in an <cite>audio</cite> subdirectory.</p>
<p>First, convert the audio files from .sph to .wav by running:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> &lt;nemo_root&gt;/scripts
python fisher_audio_to_wav.py <span class="se">\</span>
  --data_root<span class="o">=</span>&lt;fisher_root&gt; --dest_root<span class="o">=</span>&lt;conversion_target_dir&gt;
</pre></div>
</div>
<p>This will place the unsliced .wav files in <cite>&lt;conversion_target_dir&gt;/LDC200[4,5]S13-Part[1,2]/audio-wav/</cite>.
It will take several minutes to run.</p>
<p>Next, process the transcripts and slice the audio data:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python process_fisher_data.py <span class="se">\</span>
  --audio_root<span class="o">=</span>&lt;conversion_target_dir&gt; --transcript_root<span class="o">=</span>&lt;fisher_root&gt; <span class="se">\</span>
  --dest_root<span class="o">=</span>&lt;processing_target_dir&gt; <span class="se">\</span>
  --remove_noises
</pre></div>
</div>
<p>This script will split the full dataset into train, validation, and test sets, and place the audio slices in the corresponding folders in the destination directory.
One manifest will be written out per set, which includes each slice’s transcript, duration, and path.</p>
<p>This will likely take around 20 minutes to run.
Once finished, you may delete the 10 minute long .wav files if you wish.</p>
</div>
<div class="section" id="hub5-english-evaluation-speech">
<h2>2000 HUB5 English Evaluation Speech<a class="headerlink" href="#hub5-english-evaluation-speech" title="Permalink to this headline">¶</a></h2>
<p>Run the following script to convert the HUB5 data into a format expected by the <cite>nemo_asr</cite> collection.</p>
<p>Similarly to the Fisher dataset processing scripts, this script converts the .sph files to .wav, slices the audio files and transcripts into utterances, and combines them into segments of some minimum length (default is 10 seconds).
The resulting segments are all written out to an audio directory, and the corresponding transcripts are written to a manifest JSON.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You will need 5GB of free space to run this script.
You will also need to have sph2pipe installed.</p>
</div>
<p>This script assumes you already have the 2000 HUB5 dataset from the Linguistic Data Consortium.</p>
<p>Run the following to process the 2000 HUB5 English Evaluation Speech samples:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python process_hub5_data.py <span class="se">\</span>
  --data_root<span class="o">=</span>&lt;path_to_HUB5_data&gt; <span class="se">\</span>
  --dest_root<span class="o">=</span>&lt;target_dir&gt;
</pre></div>
</div>
<p>You may optionally include <cite>–min_slice_duration=&lt;num_seconds&gt;</cite> if you would like to change the minimum audio segment duration.</p>
</div>
<div class="section" id="aishell1">
<h2>Aishell1<a class="headerlink" href="#aishell1" title="Permalink to this headline">¶</a></h2>
<p>Run these scripts to download Aishell1 data and convert it into format expected by <cite>nemo_asr</cite>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># install sox</span>
sudo apt-get install sox
mkdir data
python get_aishell_data.py --data_root<span class="o">=</span>data
</pre></div>
</div>
<p>After this, your <cite>data</cite> folder should contain wav files and <cite>.json</cite> manifests for NeMo ASR datalayer:</p>
<p>Each line is a training example. <cite>audio_filepath</cite> contains path to the wav file, <cite>duration</cite> it’s duration in seconds and <cite>text</cite> it’s transcript:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;audio_filepath&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;absolute_path_to&gt;/BAC009S0062W0157.wav&quot;</span><span class="p">,</span> <span class="nt">&quot;duration&quot;</span><span class="p">:</span> <span class="mf">4.474</span><span class="p">,</span> <span class="nt">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;加上两会释放出宽松信号后&quot;</span><span class="p">}</span>
<span class="p">{</span><span class="nt">&quot;audio_filepath&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;absolute_path_to&gt;/BAC009S0062W0238.wav&quot;</span><span class="p">,</span> <span class="nt">&quot;duration&quot;</span><span class="p">:</span> <span class="mf">3.803</span><span class="p">,</span> <span class="nt">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;建设统一规范的公共资源交易市场&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="aishell2">
<h2>Aishell2<a class="headerlink" href="#aishell2" title="Permalink to this headline">¶</a></h2>
<p>xxxTO BE FILLEDxxx</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="models.html" class="btn btn-neutral float-right" title="模型" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="tutorial.html" class="btn btn-neutral float-left" title="教程" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018-2019, AI Applications team

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>